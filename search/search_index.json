{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Fjord expense API documentation","text":"<p>The Fjord Expense API provides programmatic access to expense management, receipt handling, approval workflows, and invoice generation.</p> <p>This is a demo API created as a playground and to experiment with various technical documentation capabilities around API documentation.</p>"},{"location":"#overview","title":"Overview","text":"<p>The API allows you to:</p> <ul> <li>Create and manage employee expense entries</li> <li>Upload and attach receipts to expenses</li> <li>Submit expenses for approval and process approvals</li> <li>Generate expense reports</li> <li>Create invoices from approved expenses</li> <li>Configure webhooks for event notifications</li> </ul>"},{"location":"#base-urls","title":"Base URLs","text":"<ul> <li>Production: <code>https://api.fjordexpense.example.com/v1</code></li> <li>Sandbox: <code>https://sandbox.fjordexpense.example.com/v1</code></li> </ul> <p>Use the sandbox environment for testing and development. The sandbox resets daily at 00:00 UTC.</p>"},{"location":"#getting-started","title":"Getting started","text":"<p>If you are new to the API read these guides first:</p> <ol> <li>Quick Start Guide - Describes how to make your first API call</li> <li>Authentication - Learn how to authenticate your requests</li> <li>Rate Limits - Understand API usage limits</li> </ol>"},{"location":"#common-use-cases","title":"Common use cases","text":"<p>Employee expense submission: Employees create expenses, attach receipts, and submit for approval. See Managing Expenses.</p> <p>Manager approval workflow: Managers review pending expenses and approve or reject them. See Approval Workflows.</p> <p>Client invoicing: Generate invoices from approved expenses for billing clients. See Generating Invoices.</p>"},{"location":"#api-reference","title":"API reference","text":"<p>Complete endpoint documentation is available in the API Reference.</p>"},{"location":"#support","title":"Support","text":"<p>For questions or issues with this demonstration API:</p> <ul> <li>Email: api@fjordexpense.example.com</li> <li>GitHub: github.com/JohnA-Oslo/fjord-expense-api</li> </ul>"},{"location":"api-reference/","title":"API reference","text":"<p>Complete API endpoint documentation generated from the OpenAPI specification.</p> <p>Use the interactive documentation below to explore each endpoint. Sandbox requests are sent to <code>https://sandbox.fjordexpense.example.com/v1</code>.</p> <p></p>"},{"location":"errors/","title":"Error Handling","text":"<p>The API uses standard HTTP status codes and returns structured error responses in JSON format.</p>"},{"location":"errors/#error-response-format","title":"Error Response Format","text":"<p>All error responses follow this structure:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Invalid input data\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"amount\",\n        \"issue\": \"must match pattern ^\\\\d+(\\\\.\\\\d{1,2})?$\",\n        \"value\": \"invalid\"\n      }\n    ]\n  }\n}\n</code></pre> <ul> <li><code>code</code> - Machine-readable error code (e.g., <code>validation_error</code>)</li> <li><code>message</code> - Human-readable error description</li> <li><code>request_id</code> - Correlation ID for debugging and support</li> <li><code>details</code> - Optional array of field-level error information</li> </ul>"},{"location":"errors/#http-status-codes","title":"HTTP Status Codes","text":""},{"location":"errors/#2xx-success","title":"2xx Success","text":"<p>200 OK - Request succeeded</p> <p>201 Created - Resource created successfully</p> <p>204 No Content - Request succeeded with no response body (typically for DELETE operations)</p>"},{"location":"errors/#4xx-client-errors","title":"4xx Client Errors","text":"<p>400 Bad Request - Invalid request (malformed JSON, missing required parameters)</p> <pre><code>{\n  \"error\": {\n    \"code\": \"bad_request\",\n    \"message\": \"Invalid request parameters\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>401 Unauthorized - Missing or invalid API key</p> <pre><code>{\n  \"error\": {\n    \"code\": \"unauthorized\",\n    \"message\": \"Invalid or missing API key\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>403 Forbidden - Valid credentials but insufficient permissions</p> <pre><code>{\n  \"error\": {\n    \"code\": \"forbidden\",\n    \"message\": \"You do not have access to this resource\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>404 Not Found - Resource does not exist</p> <pre><code>{\n  \"error\": {\n    \"code\": \"not_found\",\n    \"message\": \"Resource not found\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>409 Conflict - Request conflicts with current resource state</p> <pre><code>{\n  \"error\": {\n    \"code\": \"conflict\",\n    \"message\": \"Cannot modify expense in current status\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>Common causes: - Attempting to update a submitted expense - Deleting an expense that's already approved - Submitting an expense without required receipts</p> <p>413 Payload Too Large - Request body or file upload exceeds size limits</p> <pre><code>{\n  \"error\": {\n    \"code\": \"payload_too_large\",\n    \"message\": \"File size exceeds 10MB limit\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>422 Unprocessable Entity - Request is well-formed but contains validation errors</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Invalid input data\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"amount\",\n        \"issue\": \"must be greater than 0\",\n        \"value\": \"-10.00\"\n      },\n      {\n        \"field\": \"currency\",\n        \"issue\": \"must be a valid ISO 4217 currency code\",\n        \"value\": \"DOLLAR\"\n      }\n    ]\n  }\n}\n</code></pre> <p>429 Too Many Requests - Rate limit exceeded</p> <pre><code>{\n  \"error\": {\n    \"code\": \"rate_limit_exceeded\",\n    \"message\": \"Too many requests\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>See Rate Limits for details on rate limiting.</p>"},{"location":"errors/#5xx-server-errors","title":"5xx Server Errors","text":"<p>500 Internal Server Error - Unexpected server error</p> <pre><code>{\n  \"error\": {\n    \"code\": \"internal_server_error\",\n    \"message\": \"An unexpected error occurred\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>If you encounter persistent 5xx errors, contact support with the <code>request_id</code>.</p>"},{"location":"errors/#error-codes-reference","title":"Error Codes Reference","text":"Code HTTP Status Description <code>bad_request</code> 400 Invalid request format or parameters <code>unauthorized</code> 401 Missing or invalid authentication <code>forbidden</code> 403 Insufficient permissions <code>not_found</code> 404 Resource does not exist <code>conflict</code> 409 Operation conflicts with resource state <code>payload_too_large</code> 413 Request exceeds size limits <code>validation_error</code> 422 Input validation failed <code>rate_limit_exceeded</code> 429 Too many requests <code>internal_server_error</code> 500 Server error"},{"location":"errors/#best-practices","title":"Best Practices","text":"<p>Check HTTP status codes first</p> <p>Always check the HTTP status code before parsing the response body. A <code>2xx</code> status indicates success; <code>4xx</code> or <code>5xx</code> indicates an error.</p> <p>Parse error details</p> <p>For validation errors (<code>422</code>), check the <code>details</code> array for field-level information about what went wrong.</p> <p>Log request IDs</p> <p>Always log the <code>request_id</code> from error responses. Include it when contacting support to help diagnose issues quickly.</p> <p>Retry logic</p> <p>For <code>429</code> (rate limit) and <code>5xx</code> errors, implement exponential backoff retry logic:</p> <pre><code>import time\nimport requests\n\ndef make_request_with_retry(url, headers, max_retries=3):\n    for attempt in range(max_retries):\n        response = requests.get(url, headers=headers)\n\n        if response.status_code == 429 or response.status_code &gt;= 500:\n            wait_time = 2 ** attempt  # Exponential backoff\n            time.sleep(wait_time)\n            continue\n\n        return response\n\n    return response  # Return last response after all retries\n</code></pre> <p>Handle validation errors gracefully</p> <p>Present field-level validation errors to users:</p> <pre><code>def handle_error(response):\n    error_data = response.json()[\"error\"]\n\n    if error_data[\"code\"] == \"validation_error\":\n        for detail in error_data.get(\"details\", []):\n            print(f\"{detail['field']}: {detail['issue']}\")\n    else:\n        print(f\"Error: {error_data['message']}\")\n\n    print(f\"Request ID: {error_data['request_id']}\")\n</code></pre>"},{"location":"errors/#getting-help","title":"Getting Help","text":"<p>If you encounter errors you cannot resolve:</p> <ol> <li>Check the error <code>code</code> and <code>message</code> in the response</li> <li>Review the relevant API documentation</li> <li>Verify your request matches the examples in this documentation</li> <li>Contact support with the <code>request_id</code> from the error response</li> </ol>"},{"location":"webhooks/","title":"Webhooks","text":"<p>Webhooks let you receive real-time notifications when events occur in the Fjord Expense system. Instead of polling the API for changes, the system sends HTTP POST requests to your specified endpoint when events happen.</p>"},{"location":"webhooks/#before-you-begin","title":"Before you begin","text":"<p>For authentication and environment details, see Authentication.</p>"},{"location":"webhooks/#use-cases","title":"Use cases","text":"<p>Webhooks are useful for:</p> <ul> <li>Sending notifications when expenses are submitted for approval</li> <li>Triggering invoice processing when expenses are approved</li> <li>Updating external systems when invoice status changes</li> <li>Logging expense activity for audit purposes</li> <li>Automating approval workflows</li> </ul>"},{"location":"webhooks/#available-events","title":"Available events","text":"<p>The API supports these webhook events:</p> <ul> <li><code>expense.created</code> - New expense created</li> <li><code>expense.submitted</code> - Expense submitted for approval</li> <li><code>expense.approved</code> - Expense approved by manager</li> <li><code>expense.rejected</code> - Expense rejected by manager</li> <li><code>invoice.created</code> - New invoice generated</li> <li><code>invoice.sent</code> - Invoice sent to client</li> <li><code>invoice.paid</code> - Invoice marked as paid</li> </ul>"},{"location":"webhooks/#webhook-payload-structure","title":"Webhook payload structure","text":"<p>When an event occurs, the API sends a POST request to your webhook URL with this payload:</p> <pre><code>{\n  \"event\": \"expense.approved\",\n  \"timestamp\": \"2025-01-17T14:30:00Z\",\n  \"data\": {\n    \"id\": \"exp_1a2b3c4d5e\",\n    \"employee_id\": \"emp_abc123\",\n    \"amount\": \"450.00\",\n    \"currency\": \"NOK\",\n    \"status\": \"approved\"\n  }\n}\n</code></pre> <p>The <code>data</code> object contains the relevant resource (expense, invoice, etc.) that triggered the event.</p>"},{"location":"webhooks/#register-a-webhook","title":"Register a webhook","text":"<p>Use <code>POST /webhooks</code> to register a webhook endpoint.</p>"},{"location":"webhooks/#request","title":"Request","text":"<p>Required fields:</p> <ul> <li><code>url</code> - Your endpoint URL (must be HTTPS)</li> <li><code>events</code> - Array of event types to subscribe to</li> </ul> <pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/webhooks\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{\n    \"url\": \"https://your-domain.com/webhooks/fjord-expense\",\n    \"events\": [\"expense.submitted\", \"expense.approved\"]\n  }'\n</code></pre>"},{"location":"webhooks/#response","title":"Response","text":"<p>The API returns <code>201 Created</code> with the webhook details:</p> <pre><code>{\n  \"id\": \"hook_mno345\",\n  \"url\": \"https://your-domain.com/webhooks/fjord-expense\",\n  \"events\": [\"expense.submitted\", \"expense.approved\"],\n  \"created_at\": \"2025-01-17T10:00:00Z\"\n}\n</code></pre> <p>Save the <code>id</code> - you'll need it to delete the webhook later.</p>"},{"location":"webhooks/#your-webhook-endpoint","title":"Your webhook endpoint","text":"<p>Your endpoint must:</p> <ul> <li>Accept POST requests with JSON payload</li> <li>Respond with <code>200 OK</code> status within 5 seconds</li> <li>Use HTTPS (HTTP is not supported)</li> <li>Be publicly accessible (localhost URLs are not allowed)</li> </ul> <p>Example endpoint implementation (Python/Flask):</p> <pre><code>from flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\n@app.route('/webhooks/fjord-expense', methods=['POST'])\ndef handle_webhook():\n    payload = request.json\n    event_type = payload.get('event')\n\n    if event_type == 'expense.submitted':\n        # Send notification to approvers\n        notify_approvers(payload['data'])\n\n    elif event_type == 'expense.approved':\n        # Process approved expense\n        process_expense(payload['data'])\n\n    return jsonify({'status': 'received'}), 200\n</code></pre>"},{"location":"webhooks/#webhook-delivery","title":"Webhook delivery","text":"<p>Timeouts: The API waits up to 5 seconds for your endpoint to respond. If your endpoint doesn't respond within this time, the delivery is considered failed.</p> <p>Retries: Failed deliveries are retried with exponential backoff: - First retry: after 1 minute - Second retry: after 5 minutes - Third retry: after 15 minutes</p> <p>After 3 failed attempts, the webhook is automatically disabled.</p> <p>Order: Events are sent in the order they occur, but delivery is not guaranteed to be in order due to retries.</p>"},{"location":"webhooks/#security","title":"Security","text":"<p>Webhook URLs must use HTTPS. The API does not send authentication headers, so you should:</p> <ol> <li>Use a non-guessable URL (include a secret token in the path)</li> <li>Validate the request comes from Fjord Expense by checking the source IP (if your implementation supports this)</li> <li>Implement idempotency - the same event may be delivered multiple times</li> </ol> <p>Example URL with secret token:</p> <pre><code>https://your-domain.com/webhooks/fjord-expense/a8f3c2b1d4e5\n</code></pre>"},{"location":"webhooks/#list-webhooks","title":"List webhooks","text":"<p>Use <code>GET /webhooks</code> to retrieve all registered webhooks:</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/webhooks\"\n</code></pre> <p>Response:</p> <pre><code>{\n  \"data\": [\n    {\n      \"id\": \"hook_mno345\",\n      \"url\": \"https://your-domain.com/webhooks/fjord-expense\",\n      \"events\": [\"expense.submitted\", \"expense.approved\"],\n      \"created_at\": \"2025-01-17T10:00:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"webhooks/#delete-a-webhook","title":"Delete a webhook","text":"<p>Use <code>DELETE /webhooks/{webhook_id}</code> to remove a webhook:</p> <pre><code>curl -X DELETE \\\n  \"https://sandbox.fjordexpense.example.com/v1/webhooks/hook_mno345\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\"\n</code></pre> <p>Returns <code>204 No Content</code> on success.</p>"},{"location":"webhooks/#testing-webhooks","title":"Testing webhooks","text":"<p>During development, use a service like ngrok or webhook.site to create a public URL that forwards to your local environment:</p> <pre><code># Using ngrok\nngrok http 5000\n\n# Register the ngrok URL\ncurl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/webhooks\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"url\": \"https://abc123.ngrok.io/webhooks\",\n    \"events\": [\"expense.submitted\"]\n  }'\n</code></pre> <p>Then trigger events in the sandbox environment to test your webhook handling.</p>"},{"location":"webhooks/#error-handling","title":"Error handling","text":"<p>Common errors when working with webhooks:</p> <p>422 Validation Error - Invalid URL or event types:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Invalid webhook configuration\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"url\",\n        \"issue\": \"must be a valid HTTPS URL\"\n      }\n    ]\n  }\n}\n</code></pre> <p>400 Bad Request - URL not accessible:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"bad_request\",\n    \"message\": \"Webhook URL is not accessible\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>404 Not Found - Webhook ID does not exist when attempting to delete.</p>"},{"location":"webhooks/#best-practices","title":"Best practices","text":"<p>Respond quickly: Return <code>200 OK</code> immediately and process the webhook payload asynchronously. Don't perform slow operations before responding.</p> <p>Handle duplicates: The same event may be delivered multiple times. Use the event <code>timestamp</code> and resource <code>id</code> to detect and ignore duplicates.</p> <p>Log deliveries: Keep logs of received webhooks for debugging and auditing.</p> <p>Monitor failures: If your endpoint is consistently failing, check your logs and fix any issues. The webhook will be automatically disabled after 3 consecutive failures.</p> <p>Use specific events: Only subscribe to events you need. This reduces unnecessary traffic to your endpoint.</p>"},{"location":"getting-started/authentication/","title":"Authentication","text":"<p>All API requests require authentication using an API key.</p>"},{"location":"getting-started/authentication/#obtaining-an-api-key","title":"Obtaining an API key","text":"<p>API keys are generated through the Fjord Expense dashboard:</p> <ol> <li>Log in to your account at <code>https://app.fjordexpense.example.com</code></li> <li>Navigate to Settings \u2192 API Keys</li> <li>Click Generate New Key</li> <li>Copy the key immediately - it will only be shown once</li> </ol> <p>Store your API key securely. Do not commit it to version control or expose it in client-side code.</p>"},{"location":"getting-started/authentication/#using-your-api-key","title":"Using your API key","text":"<p>Include your API key in the <code>X-API-Key</code> header with every request:</p> <pre><code>curl https://api.fjordexpense.example.com/v1/expenses \\\n  -H \"X-API-Key: your_api_key_here\"\n</code></pre> <pre><code>import requests\n\nheaders = {\n    \"X-API-Key\": \"your_api_key_here\"\n}\n\nresponse = requests.get(\n    \"https://api.fjordexpense.example.com/v1/expenses\",\n    headers=headers\n)\n</code></pre> <pre><code>const response = await fetch(\n  'https://api.fjordexpense.example.com/v1/expenses',\n  {\n    headers: {\n      'X-API-Key': 'your_api_key_here'\n    }\n  }\n);\n</code></pre>"},{"location":"getting-started/authentication/#authentication-errors","title":"Authentication errors","text":"<p>If authentication fails, you'll receive a <code>401 Unauthorized</code> response:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"unauthorized\",\n    \"message\": \"Invalid or missing API key\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>Common causes:</p> <ul> <li>Missing <code>X-API-Key</code> header</li> <li>Invalid or expired API key</li> <li>API key revoked in dashboard</li> </ul>"},{"location":"getting-started/authentication/#api-key-permissions","title":"API key permissions","text":"<p>API keys inherit the permissions of the user who created them. An employee's API key can only access their own expenses, while a manager's key can access expenses from their team members.</p>"},{"location":"getting-started/authentication/#rotating-api-keys","title":"Rotating API keys","text":"<p>Rotate your API keys regularly:</p> <ol> <li>Generate a new API key in the dashboard</li> <li>Update your application to use the new key</li> <li>Verify the new key works correctly</li> <li>Revoke the old key in the dashboard</li> </ol> <p>We recommend rotating keys at least every 90 days.</p>"},{"location":"getting-started/authentication/#sandbox-api-keys","title":"Sandbox API keys","text":"<p>Sandbox API keys are separate from production keys. Generate sandbox keys specifically for testing at <code>https://sandbox.fjordexpense.example.com</code>.</p>"},{"location":"getting-started/quickstart/","title":"Getting started with the Fjord Expense API","text":"<p>The Fjord Expense API lets you create and manage expenses, attach receipts, submit expenses for approval, and track approvals. This topic shows how to authenticate, choose an environment, and complete a basic end-to-end flow using <code>curl</code>.</p>"},{"location":"getting-started/quickstart/#base-urls","title":"Base URLs","text":"<p>Use the sandbox environment while you build and test:</p> <ul> <li>Sandbox: <code>https://sandbox.fjordexpense.example.com/v1</code></li> <li>Production: <code>https://api.fjordexpense.example.com/v1</code></li> </ul>"},{"location":"getting-started/quickstart/#authentication","title":"Authentication","text":"<p>All endpoints require an API key sent in the <code>X-API-Key</code> header.</p> <ol> <li>Obtain an API key from your Fjord Expense developer portal.</li> <li>Send the key with every request:</li> </ol> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  https://sandbox.fjordexpense.example.com/v1/categories\n</code></pre> <p>If the API key is missing or invalid, the API returns <code>401 Unauthorized</code>.</p>"},{"location":"getting-started/quickstart/#content-types","title":"Content types","text":"<ul> <li> <p>Most endpoints use JSON:</p> <ul> <li>Request header: <code>Content-Type: application/json</code></li> <li>Response header: <code>Accept: application/json</code></li> </ul> </li> <li> <p>Receipt upload uses <code>multipart/form-data</code>.</p> </li> <li>Some endpoints return binary content (for example, PDF downloads).</li> </ul>"},{"location":"getting-started/quickstart/#step-1-list-categories","title":"Step 1: List categories","text":"<p>Categories are used when creating an expense (<code>category_id</code> is required).</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n     -H \"Accept: application/json\" \\\n     https://sandbox.fjordexpense.example.com/v1/categories\n</code></pre> <p>A typical response shape is:</p> <pre><code>{\n  \"data\": [\n    { \"id\": \"cat_travel\", \"name\": \"Travel\" },\n    { \"id\": \"cat_meals\", \"name\": \"Meals\" }\n  ]\n}\n</code></pre>"},{"location":"getting-started/quickstart/#step-2-create-an-expense","title":"Step 2: Create an expense","text":"<p>Create a draft expense with the minimum required fields:</p> <ul> <li><code>category_id</code></li> <li><code>amount</code> (string with up to 2 decimal places, e.g. \"450.00\")</li> <li><code>currency</code> (3-letter code, e.g. NOK)</li> <li><code>date</code> (YYYY-MM-DD)</li> <li><code>description</code></li> </ul> <pre><code>curl -X POST \\\n  https://sandbox.fjordexpense.example.com/v1/expenses \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{\n    \"category_id\": \"cat_travel\",\n    \"amount\": \"450.00\",\n    \"currency\": \"NOK\",\n    \"date\": \"2025-01-10\",\n    \"description\": \"Client meeting in Bergen\",\n    \"merchant\": \"NSB\"\n  }'\n</code></pre> <p>The response includes the expense ID (for example, <code>exp_1a2b3c4d5e</code>). Save this for the next steps.</p>"},{"location":"getting-started/quickstart/#step-3-upload-a-receipt-and-attach-it-to-the-expense","title":"Step 3: Upload a receipt and attach it to the expense","text":"<p>Upload a receipt file using <code>multipart/form-data</code>. If you include <code>expense_id</code>, the receipt is attached during upload.</p> <pre><code>curl -X POST \\\n  https://sandbox.fjordexpense.example.com/v1/receipts \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  -F \"file=@/path/to/receipt.jpg\" \\\n  -F \"expense_id=exp_1a2b3c4d5e\"\n</code></pre> <p>The response includes a <code>receipt_id</code> (for example, <code>rec_xyz789</code>). You can download this later using the <code>download</code> endpoint.</p>"},{"location":"getting-started/quickstart/#step-4-submit-the-expense-for-approval","title":"Step 4: Submit the expense for approval","text":"<p>Submitting the expense changes the expense status from <code>draft</code> to <code>submitted</code> (assuming it passes validation).</p> <pre><code>curl -X POST \\\n  https://sandbox.fjordexpense.example.com/v1/expenses/exp_1a2b3c4d5e/submit \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\"\n</code></pre> <p>If the expense ID does not exist, you\u2019ll get <code>404 Not Found</code>. If the request is invalid, you\u2019ll get <code>400 Bad Request</code>.</p>"},{"location":"getting-started/quickstart/#step-5-track-approval-status","title":"Step 5: Track approval status","text":"<p>Approvals are represented as their own resource. To list approvals (for example, for an approver workflow):</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n     -H \"Accept: application/json\" \\\n     \"https://sandbox.fjordexpense.example.com/v1/approvals?status=pending\"\n</code></pre> <p>A single approval includes <code>expense_id</code>, an embedded <code>expense</code> object, and an approval <code>status</code> (<code>pending</code>, <code>approved</code>, <code>rejected</code>).</p>"},{"location":"getting-started/quickstart/#approve-or-reject-an-expense-approver-only","title":"Approve or reject an expense (approver only)","text":"<p>Approve:</p> <pre><code>curl -X POST \\\n  https://sandbox.fjordexpense.example.com/v1/approvals/appr_def456/approve \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\"\n</code></pre> <p>Reject (with a comment, if your implementation supports it):</p> <pre><code>curl -X POST \\\n  https://sandbox.fjordexpense.example.com/v1/approvals/appr_def456/reject \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{ \"comment\": \"Receipt is unreadable\" }'\n</code></pre>"},{"location":"getting-started/quickstart/#listing-expenses-with-filters-and-pagination","title":"Listing expenses with filters and pagination","text":"<p>The <code>GET /expenses</code> endpoint supports filtering (for example by <code>status</code>, <code>employee_id</code>, date range, and <code>category_id</code>) and uses <code>limit</code>/<code>offset</code> pagination. The response includes:</p> <ul> <li><code>data</code>: array of expenses</li> <li><code>pagination</code>: <code>{ limit, offset, total, has_more }</code></li> </ul> <p>Example:</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n     -H \"Accept: application/json\" \\\n     \"https://sandbox.fjordexpense.example.com/v1/expenses?status=submitted&amp;limit=20&amp;offset=0\"\n</code></pre>"},{"location":"getting-started/quickstart/#handling-errors","title":"Handling errors","text":"<p>Error responses use a consistent shape:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Request validation failed.\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      { \"field\": \"currency\", \"issue\": \"must be a 3-letter code\" }\n    ]\n  }\n}\n</code></pre> <p>Common HTTP statuses you should handle:</p> <ul> <li><code>400 Bad Request</code> (validation problems)</li> <li><code>401 Unauthorized</code> (missing/invalid API key)</li> <li><code>404 Not Found</code> (unknown IDs)</li> <li><code>429 Too Many Requests</code> (if you simulate rate limiting in your sample)</li> </ul>"},{"location":"getting-started/quickstart/#next-steps","title":"Next steps","text":"<ul> <li>Implement an \u201cexpense list\u201d view using <code>GET /expenses</code> with filters and pagination.</li> <li>Add a \u201creceipt viewer\u201d using <code>GET /receipts/{receipt_id}/download</code> (binary response).</li> <li>Use the Reports endpoints if you want a higher-level workflow, for example, generating a PDF via <code>GET /reports/{report_id}/pdf</code>.</li> </ul>"},{"location":"getting-started/rate-limits/","title":"Rate limits","text":"<p>The Fjord Expense API implements rate limiting to ensure fair usage and maintain service quality for all users. This guide explains how rate limits work, how to handle rate limit errors, and best practices for staying within limits.</p>"},{"location":"getting-started/rate-limits/#rate-limit-tiers","title":"Rate limit tiers","text":"<p>Rate limits are applied per API key:</p> Environment Requests per minute Requests per hour Sandbox 100 2,000 Production 300 10,000 <p>These limits apply to all endpoints combined. For example, 50 expense creation requests and 50 receipt uploads count as 100 requests toward your per-minute limit.</p>"},{"location":"getting-started/rate-limits/#rate-limit-headers","title":"Rate limit headers","text":"<p>Every API response includes headers showing your current rate limit status:</p> <pre><code>X-RateLimit-Limit: 300\nX-RateLimit-Remaining: 245\nX-RateLimit-Reset: 1705503600\n</code></pre> <ul> <li><code>X-RateLimit-Limit</code> - Maximum requests allowed in the current window</li> <li><code>X-RateLimit-Remaining</code> - Requests remaining in the current window</li> <li><code>X-RateLimit-Reset</code> - Unix timestamp when the limit resets</li> </ul> <p>Use these headers to track your usage and avoid hitting limits.</p>"},{"location":"getting-started/rate-limits/#rate-limit-exceeded-response","title":"Rate limit exceeded response","text":"<p>When you exceed the rate limit, the API returns <code>429 Too Many Requests</code>:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"rate_limit_exceeded\",\n    \"message\": \"Too many requests\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>The response also includes a <code>Retry-After</code> header indicating how many seconds to wait before retrying:</p> <pre><code>HTTP/1.1 429 Too Many Requests\nRetry-After: 30\nX-RateLimit-Limit: 300\nX-RateLimit-Remaining: 0\nX-RateLimit-Reset: 1705503600\n</code></pre>"},{"location":"getting-started/rate-limits/#handling-rate-limits","title":"Handling rate limits","text":""},{"location":"getting-started/rate-limits/#check-headers-before-making-requests","title":"Check headers before making requests","text":"<p>Monitor the <code>X-RateLimit-Remaining</code> header to see how many requests you have left:</p> <pre><code>import requests\n\nresponse = requests.get(\n    \"https://api.fjordexpense.example.com/v1/expenses\",\n    headers={\"X-API-Key\": api_key}\n)\n\nremaining = int(response.headers.get('X-RateLimit-Remaining', 0))\nif remaining &lt; 10:\n    print(f\"Warning: Only {remaining} requests remaining\")\n</code></pre>"},{"location":"getting-started/rate-limits/#implement-exponential-backoff","title":"Implement exponential backoff","text":"<p>When you receive a <code>429</code> response, wait before retrying. Use exponential backoff to gradually increase wait times:</p> <pre><code>import time\nimport requests\n\ndef make_request_with_retry(url, headers, max_retries=3):\n    for attempt in range(max_retries):\n        response = requests.get(url, headers=headers)\n\n        if response.status_code == 429:\n            retry_after = int(response.headers.get('Retry-After', 60))\n            wait_time = retry_after * (2 ** attempt)  # Exponential backoff\n            print(f\"Rate limited. Waiting {wait_time} seconds...\")\n            time.sleep(wait_time)\n            continue\n\n        return response\n\n    return response  # Return last response after all retries\n</code></pre>"},{"location":"getting-started/rate-limits/#respect-the-retry-after-header","title":"Respect the Retry-After header","text":"<p>Always check the <code>Retry-After</code> header when you receive a <code>429</code> response. This tells you exactly how long to wait:</p> <pre><code>if response.status_code == 429:\n    retry_after = int(response.headers.get('Retry-After', 60))\n    time.sleep(retry_after)\n    # Retry request\n</code></pre>"},{"location":"getting-started/rate-limits/#best-practices","title":"Best practices","text":"<p>Batch operations: Use bulk endpoints like <code>POST /expenses/bulk</code> to create multiple resources in a single request rather than making multiple individual requests.</p> <p>Cache responses: Cache expense categories, which change infrequently, rather than fetching them with every operation.</p> <p>Implement request queuing: Queue requests in your application and process them at a controlled rate to avoid sudden spikes.</p> <p>Monitor your usage: Track the <code>X-RateLimit-Remaining</code> header and adjust your request rate proactively.</p> <p>Use webhooks: Instead of polling for updates, use webhooks to receive notifications when events occur. This dramatically reduces the number of API requests needed.</p> <p>Spread requests over time: If you need to process large batches of data, distribute requests evenly across the hour rather than sending them all at once.</p>"},{"location":"getting-started/rate-limits/#rate-limit-examples","title":"Rate limit examples","text":""},{"location":"getting-started/rate-limits/#example-1-checking-remaining-requests","title":"Example 1: Checking remaining requests","text":"<pre><code>curl -i -H \"X-API-Key: $FJORD_API_KEY\" \\\n  \"https://api.fjordexpense.example.com/v1/expenses\" \\\n  | grep X-RateLimit\n</code></pre> <p>Output:</p> <pre><code>X-RateLimit-Limit: 300\nX-RateLimit-Remaining: 245\nX-RateLimit-Reset: 1705503600\n</code></pre>"},{"location":"getting-started/rate-limits/#example-2-handling-rate-limit-in-python","title":"Example 2: Handling rate limit in Python","text":"<pre><code>import requests\nimport time\n\ndef fetch_all_expenses(api_key):\n    expenses = []\n    offset = 0\n    limit = 50\n\n    while True:\n        response = requests.get(\n            f\"https://api.fjordexpense.example.com/v1/expenses\",\n            params={\"limit\": limit, \"offset\": offset},\n            headers={\"X-API-Key\": api_key}\n        )\n\n        # Check rate limit\n        if response.status_code == 429:\n            retry_after = int(response.headers.get('Retry-After', 60))\n            print(f\"Rate limited. Waiting {retry_after} seconds...\")\n            time.sleep(retry_after)\n            continue\n\n        data = response.json()\n        expenses.extend(data['data'])\n\n        # Check if we need to slow down\n        remaining = int(response.headers.get('X-RateLimit-Remaining', 0))\n        if remaining &lt; 50:\n            print(f\"Throttling: {remaining} requests remaining\")\n            time.sleep(2)  # Add delay to avoid hitting limit\n\n        # Check if there are more results\n        if not data['pagination']['has_more']:\n            break\n\n        offset += limit\n\n    return expenses\n</code></pre>"},{"location":"getting-started/rate-limits/#example-3-bulk-operations-to-reduce-requests","title":"Example 3: Bulk operations to reduce requests","text":"<p>Instead of creating expenses one at a time:</p> <pre><code># BAD: 100 requests for 100 expenses\nfor i in {1..100}; do\n  curl -X POST \"https://api.fjordexpense.example.com/v1/expenses\" \\\n    -H \"X-API-Key: $FJORD_API_KEY\" \\\n    -d '{\"category_id\":\"cat_travel\", ...}'\ndone\n</code></pre> <p>Use the bulk endpoint:</p> <pre><code># GOOD: 1 request for 100 expenses\ncurl -X POST \"https://api.fjordexpense.example.com/v1/expenses/bulk\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"expenses\": [\n      {\"category_id\":\"cat_travel\", ...},\n      {\"category_id\":\"cat_meals\", ...},\n      ...\n    ]\n  }'\n</code></pre>"},{"location":"getting-started/rate-limits/#requesting-higher-limits","title":"Requesting higher limits","text":"<p>If your application requires higher rate limits, contact support at api@fjordexpense.example.com with:</p> <ul> <li>Your API key ID (not the key itself)</li> <li>Current usage patterns</li> <li>Business justification for higher limits</li> <li>Expected request volume</li> </ul> <p>Requests for increased limits are reviewed on a case-by-case basis.</p>"},{"location":"getting-started/rate-limits/#rate-limit-faqs","title":"Rate limit FAQs","text":"<p>Q: Are rate limits per user or per API key? A: Rate limits are applied per API key. Each API key has its own independent rate limit.</p> <p>Q: Do failed requests count toward the rate limit? A: Yes. All requests count toward your rate limit, including those that return errors (400, 401, 404, etc.).</p> <p>Q: Can I see my historical rate limit usage? A: No. Rate limit headers show only the current window. Implement your own logging if you need historical tracking.</p> <p>Q: What happens if I consistently hit rate limits? A: Consistent rate limit violations may result in temporary suspension. Use the best practices above to stay within limits.</p> <p>Q: Are different endpoints weighted differently? A: No. All endpoints count equally toward your rate limit. A simple GET request counts the same as a complex POST request.</p>"},{"location":"guides/approvals/","title":"Approval workflows","text":"<p>The approval endpoints let managers review and approve or reject submitted expenses. This guide covers listing pending approvals, approving expenses, and rejecting expenses with reasons.</p>"},{"location":"guides/approvals/#before-you-begin","title":"Before you begin","text":"<p>Approvals are only accessible to users with manager permissions. Employee users can submit expenses for approval but cannot access approval endpoints.</p> <p>For authentication and environment details, see Authentication.</p>"},{"location":"guides/approvals/#approval-lifecycle","title":"Approval lifecycle","text":"<p>When an employee submits an expense using <code>POST /expenses/{expense_id}/submit</code>, an approval record is created with <code>status: pending</code>. The expense remains in <code>submitted</code> status until the approval is processed.</p> <p>Approval <code>status</code> values:</p> <ul> <li><code>pending</code> - Awaiting manager decision</li> <li><code>approved</code> - Manager approved the expense</li> <li><code>rejected</code> - Manager rejected the expense</li> </ul> <p>Once an approval is <code>approved</code> or <code>rejected</code>, it cannot be changed. The employee must create a new expense if corrections are needed.</p>"},{"location":"guides/approvals/#list-pending-approvals","title":"List pending approvals","text":"<p>Use <code>GET /approvals</code> to retrieve expenses awaiting approval. By default, this returns approvals assigned to the authenticated user.</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals?limit=50&amp;offset=0\"\n</code></pre>"},{"location":"guides/approvals/#response","title":"Response","text":"<pre><code>{\n  \"data\": [\n    {\n      \"id\": \"appr_def456\",\n      \"expense_id\": \"exp_1a2b3c4d5e\",\n      \"expense\": {\n        \"id\": \"exp_1a2b3c4d5e\",\n        \"employee_id\": \"emp_abc123\",\n        \"category_id\": \"cat_travel\",\n        \"amount\": \"450.00\",\n        \"currency\": \"NOK\",\n        \"date\": \"2025-01-10\",\n        \"description\": \"Client meeting in Bergen\",\n        \"merchant\": \"NSB\",\n        \"status\": \"submitted\",\n        \"receipt_ids\": [\"rec_xyz789\"],\n        \"created_at\": \"2025-01-14T10:30:00Z\",\n        \"updated_at\": \"2025-01-14T11:00:00Z\"\n      },\n      \"approver_id\": \"emp_manager1\",\n      \"status\": \"pending\",\n      \"comment\": null,\n      \"approved_at\": null,\n      \"rejected_at\": null\n    }\n  ],\n  \"pagination\": {\n    \"limit\": 50,\n    \"offset\": 0,\n    \"total\": 1,\n    \"has_more\": false\n  }\n}\n</code></pre> <p>The <code>expense</code> object is embedded in the approval, giving you immediate access to expense details without additional API calls.</p>"},{"location":"guides/approvals/#pagination","title":"Pagination","text":"<p>Use <code>limit</code> and <code>offset</code> parameters to paginate through large result sets:</p> <pre><code># Get the next page\ncurl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals?limit=50&amp;offset=50\"\n</code></pre>"},{"location":"guides/approvals/#approve-an-expense","title":"Approve an expense","text":"<p>Use <code>POST /approvals/{approval_id}/approve</code> to approve a pending expense.</p> <pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals/appr_def456/approve\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\"\n</code></pre>"},{"location":"guides/approvals/#optional-comment","title":"Optional comment","text":"<p>You can include an optional comment (maximum 500 characters):</p> <pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals/appr_def456/approve\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{\n    \"comment\": \"Approved for reimbursement\"\n  }'\n</code></pre>"},{"location":"guides/approvals/#response_1","title":"Response","text":"<pre><code>{\n  \"id\": \"appr_def456\",\n  \"expense_id\": \"exp_1a2b3c4d5e\",\n  \"expense\": {\n    \"id\": \"exp_1a2b3c4d5e\",\n    \"status\": \"approved\",\n    ...\n  },\n  \"approver_id\": \"emp_manager1\",\n  \"status\": \"approved\",\n  \"comment\": \"Approved for reimbursement\",\n  \"approved_at\": \"2025-01-17T14:30:00Z\",\n  \"rejected_at\": null\n}\n</code></pre> <p>After approval: - The approval <code>status</code> changes to <code>approved</code> - The approval <code>approved_at</code> timestamp is set - The expense <code>status</code> changes to <code>approved</code> - The expense becomes available for invoicing or reimbursement</p>"},{"location":"guides/approvals/#reject-an-expense","title":"Reject an expense","text":"<p>Use <code>POST /approvals/{approval_id}/reject</code> to reject a pending expense. A rejection reason is required.</p> <pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals/appr_def456/reject\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{\n    \"reason\": \"Receipt is unclear. Please upload a higher quality image.\"\n  }'\n</code></pre> <p>The <code>reason</code> field is required and limited to 500 characters.</p>"},{"location":"guides/approvals/#response_2","title":"Response","text":"<pre><code>{\n  \"id\": \"appr_def456\",\n  \"expense_id\": \"exp_1a2b3c4d5e\",\n  \"expense\": {\n    \"id\": \"exp_1a2b3c4d5e\",\n    \"status\": \"rejected\",\n    ...\n  },\n  \"approver_id\": \"emp_manager1\",\n  \"status\": \"rejected\",\n  \"comment\": \"Receipt is unclear. Please upload a higher quality image.\",\n  \"approved_at\": null,\n  \"rejected_at\": \"2025-01-17T14:35:00Z\"\n}\n</code></pre> <p>After rejection: - The approval <code>status</code> changes to <code>rejected</code> - The approval <code>rejected_at</code> timestamp is set - The expense <code>status</code> changes to <code>rejected</code> - The rejection reason is stored in the <code>comment</code> field - The employee can view the rejection reason and create a corrected expense</p>"},{"location":"guides/approvals/#approval-workflow-example","title":"Approval workflow example","text":"<p>Complete workflow from expense submission to approval:</p> <pre><code># Employee: Create expense\nEXPENSE_ID=$(curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/expenses\" \\\n  -H \"X-API-Key: $EMPLOYEE_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"category_id\": \"cat_travel\",\n    \"amount\": \"450.00\",\n    \"currency\": \"NOK\",\n    \"date\": \"2025-01-10\",\n    \"description\": \"Client meeting\",\n    \"merchant\": \"NSB\"\n  }' | jq -r '.id')\n\n# Employee: Upload receipt\ncurl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts\" \\\n  -H \"X-API-Key: $EMPLOYEE_API_KEY\" \\\n  -F \"file=@receipt.pdf\" \\\n  -F \"expense_id=$EXPENSE_ID\"\n\n# Employee: Submit for approval\ncurl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/expenses/$EXPENSE_ID/submit\" \\\n  -H \"X-API-Key: $EMPLOYEE_API_KEY\"\n\n# Manager: List pending approvals\nAPPROVAL_ID=$(curl -H \"X-API-Key: $MANAGER_API_KEY\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals\" \\\n  | jq -r '.data[0].id')\n\n# Manager: Approve expense\ncurl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/approvals/$APPROVAL_ID/approve\" \\\n  -H \"X-API-Key: $MANAGER_API_KEY\"\n</code></pre>"},{"location":"guides/approvals/#error-handling","title":"Error handling","text":"<p>Common errors when working with approvals:</p> <p>403 Forbidden - User lacks approval permissions:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"forbidden\",\n    \"message\": \"You do not have permission to approve expenses\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>404 Not Found - Approval ID does not exist:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"not_found\",\n    \"message\": \"Approval not found\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>409 Conflict - Approval already processed:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"conflict\",\n    \"message\": \"Approval has already been processed\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>422 Validation Error - Missing required rejection reason:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Rejection reason is required\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"reason\",\n        \"issue\": \"required field is missing\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"guides/approvals/#best-practices","title":"Best practices","text":"<p>Review receipts: Always check that receipts are clear and complete before approving. Use <code>GET /receipts/{receipt_id}/download</code> to view receipt images.</p> <p>Provide clear rejection reasons: When rejecting expenses, explain specifically what needs to be corrected so employees can resubmit properly.</p> <p>Process approvals promptly: Delayed approvals can impact employee reimbursement timelines and financial reporting.</p> <p>Check embedded expense details: The approval response includes the full expense object, eliminating the need for additional API calls to verify expense details.</p> <p>Handle already-processed approvals gracefully: If you receive a <code>409 Conflict</code> error, the approval has already been processed by another manager. Refresh your approval list.</p>"},{"location":"guides/expenses/","title":"Managing expenses","text":"<p>This guide covers the complete lifecycle of an expense: creating, attaching receipts, updating, submitting for approval, and checking status.</p>"},{"location":"guides/expenses/#creating-an-expense","title":"Creating an expense","text":"<p>Create a new expense with <code>POST /expenses</code>:</p> <pre><code>curl -X POST https://api.fjordexpense.example.com/v1/expenses \\\n  -H \"X-API-Key: your_api_key_here\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"category_id\": \"cat_travel\",\n    \"amount\": \"450.00\",\n    \"currency\": \"NOK\",\n    \"date\": \"2025-01-10\",\n    \"description\": \"Client meeting in Bergen\",\n    \"merchant\": \"NSB\"\n  }'\n</code></pre> <p>Response:</p> <pre><code>{\n  \"id\": \"exp_1a2b3c4d5e\",\n  \"employee_id\": \"emp_abc123\",\n  \"category_id\": \"cat_travel\",\n  \"amount\": \"450.00\",\n  \"currency\": \"NOK\",\n  \"date\": \"2025-01-10\",\n  \"description\": \"Client meeting in Bergen\",\n  \"merchant\": \"NSB\",\n  \"status\": \"draft\",\n  \"receipt_ids\": [],\n  \"created_at\": \"2025-01-14T10:30:00Z\",\n  \"updated_at\": \"2025-01-14T10:30:00Z\"\n}\n</code></pre> <p>The expense is created in <code>draft</code> status. You can update it freely until it's submitted.</p>"},{"location":"guides/expenses/#required-fields","title":"Required fields","text":"<p>When creating an expense, you must provide:</p> <ul> <li><code>category_id</code> - Valid expense category (see Categories API)</li> <li><code>amount</code> - Amount as a string with up to 2 decimal places (e.g., \"450.00\")</li> <li><code>currency</code> - ISO 4217 currency code (e.g., \"NOK\", \"EUR\", \"USD\")</li> <li><code>date</code> - Date of the expense in YYYY-MM-DD format</li> <li><code>description</code> - Brief description of the expense</li> </ul> <p>The <code>merchant</code> field is optional but recommended.</p>"},{"location":"guides/expenses/#amount-formatting","title":"Amount formatting","text":"<p>Always send amounts as strings with up to 2 decimal places:</p> <ul> <li>\u2705 <code>\"450.00\"</code>, <code>\"12.50\"</code>, <code>\"1000\"</code></li> <li>\u274c <code>450</code>, <code>12.5</code>, <code>\"1,000.00\"</code></li> </ul> <p>This avoids floating-point precision issues with financial data.</p>"},{"location":"guides/expenses/#attaching-receipts","title":"Attaching receipts","text":"<p>After creating an expense, upload a receipt:</p> <pre><code>curl -X POST https://api.fjordexpense.example.com/v1/receipts \\\n  -H \"X-API-Key: your_api_key_here\" \\\n  -F \"file=@receipt.pdf\" \\\n  -F \"expense_id=exp_1a2b3c4d5e\"\n</code></pre> <p>You can attach multiple receipts to a single expense. Supported formats are PDF, JPEG, and PNG. Maximum file size is 10MB.</p> <p>See the Working with Receipts guide for more details.</p>"},{"location":"guides/expenses/#updating-an-expense","title":"Updating an expense","text":"<p>Update draft expenses with <code>PATCH /expenses/{expense_id}</code>:</p> <pre><code>curl -X PATCH https://api.fjordexpense.example.com/v1/expenses/exp_1a2b3c4d5e \\\n  -H \"X-API-Key: your_api_key_here\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"amount\": \"475.00\",\n    \"description\": \"Client meeting in Bergen - updated amount\"\n  }'\n</code></pre> <p>Only draft expenses can be updated. Attempting to update a submitted or approved expense returns a <code>409 Conflict</code> error.</p>"},{"location":"guides/expenses/#submitting-for-approval","title":"Submitting for approval","text":"<p>Once an expense has all required information and at least one receipt, submit it:</p> <pre><code>curl -X POST https://api.fjordexpense.example.com/v1/expenses/exp_1a2b3c4d5e/submit \\\n  -H \"X-API-Key: your_api_key_here\"\n</code></pre> <p>The expense status changes to <code>submitted</code> and enters the approval queue. After submission, you cannot modify or delete the expense.</p>"},{"location":"guides/expenses/#checking-expense-status","title":"Checking expense status","text":"<p>Retrieve an expense to check its current status:</p> <pre><code>curl https://api.fjordexpense.example.com/v1/expenses/exp_1a2b3c4d5e \\\n  -H \"X-API-Key: your_api_key_here\"\n</code></pre> <p>Possible status values:</p> <ul> <li><code>draft</code> - Expense is being prepared, not yet submitted</li> <li><code>submitted</code> - Awaiting approval</li> <li><code>approved</code> - Approved by manager</li> <li><code>rejected</code> - Rejected by manager with reason</li> <li><code>paid</code> - Approved and reimbursed</li> </ul>"},{"location":"guides/expenses/#listing-your-expenses","title":"Listing your expenses","text":"<p>Retrieve all your expenses with optional filters:</p> <pre><code># All expenses\ncurl https://api.fjordexpense.example.com/v1/expenses \\\n  -H \"X-API-Key: your_api_key_here\"\n\n# Only approved expenses\ncurl \"https://api.fjordexpense.example.com/v1/expenses?status=approved\" \\\n  -H \"X-API-Key: your_api_key_here\"\n\n# Expenses from a date range\ncurl \"https://api.fjordexpense.example.com/v1/expenses?from_date=2025-01-01&amp;to_date=2025-01-31\" \\\n  -H \"X-API-Key: your_api_key_here\"\n</code></pre> <p>Available filters:</p> <ul> <li><code>status</code> - Filter by expense status</li> <li><code>from_date</code> / <code>to_date</code> - Date range filter</li> <li><code>category_id</code> - Filter by expense category</li> <li><code>limit</code> / <code>offset</code> - Pagination (default limit: 50, max: 100)</li> </ul>"},{"location":"guides/expenses/#creating-multiple-expenses","title":"Creating multiple expenses","text":"<p>Create multiple expenses in a single request with <code>POST /expenses/bulk</code>:</p> <pre><code>curl -X POST https://api.fjordexpense.example.com/v1/expenses/bulk \\\n  -H \"X-API-Key: your_api_key_here\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"expenses\": [\n      {\n        \"category_id\": \"cat_travel\",\n        \"amount\": \"450.00\",\n        \"currency\": \"NOK\",\n        \"date\": \"2025-01-10\",\n        \"description\": \"Train to Bergen\",\n        \"merchant\": \"NSB\"\n      },\n      {\n        \"category_id\": \"cat_meals\",\n        \"amount\": \"180.00\",\n        \"currency\": \"NOK\",\n        \"date\": \"2025-01-10\",\n        \"description\": \"Client lunch\",\n        \"merchant\": \"Restaurant Name\"\n      }\n    ]\n  }'\n</code></pre> <p>Maximum 100 expenses per request. The response indicates which expenses were created successfully and which failed:</p> <pre><code>{\n  \"created\": [\n    {\n      \"id\": \"exp_1a2b3c4d5e\",\n      \"status\": \"draft\",\n      ...\n    }\n  ],\n  \"failed\": [\n    {\n      \"index\": 1,\n      \"error\": \"Invalid category_id\"\n    }\n  ]\n}\n</code></pre>"},{"location":"guides/expenses/#deleting-an-expense","title":"Deleting an expense","text":"<p>Delete draft expenses with <code>DELETE /expenses/{expense_id}</code>:</p> <pre><code>curl -X DELETE https://api.fjordexpense.example.com/v1/expenses/exp_1a2b3c4d5e \\\n  -H \"X-API-Key: your_api_key_here\"\n</code></pre> <p>Returns <code>204 No Content</code> on success. Only draft expenses can be deleted. Attempting to delete a submitted or approved expense returns <code>409 Conflict</code>.</p>"},{"location":"guides/expenses/#error-handling","title":"Error handling","text":"<p>Common errors when working with expenses:</p> <p>422 Validation Error - Invalid or missing required fields:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Invalid input data\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"amount\",\n        \"issue\": \"must match pattern ^\\\\d+(\\\\.\\\\d{1,2})?$\",\n        \"value\": \"450.5.0\"\n      }\n    ]\n  }\n}\n</code></pre> <p>409 Conflict - Operation not allowed in current state:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"conflict\",\n    \"message\": \"Cannot modify expense in current status\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>400 Bad Request - Missing receipt when submitting:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"bad_request\",\n    \"message\": \"Expense must have at least one receipt before submission\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>Include the <code>request_id</code> when contacting support for help with specific errors.</p>"},{"location":"guides/invoicing/","title":"Invoicing","text":"<p>The invoicing endpoints let you generate invoices from approved expenses, retrieve invoice details, and send invoices to clients.</p>"},{"location":"guides/invoicing/#before-you-begin","title":"Before you begin","text":"<p>Invoices are generated from approved expenses. You'll typically list expenses with <code>status=approved</code>, then create an invoice using the returned expense IDs.</p> <p>For authentication and environment details, see Authentication.</p>"},{"location":"guides/invoicing/#invoice-lifecycle","title":"Invoice lifecycle","text":"<p>Invoice <code>status</code> values:</p> <ul> <li><code>draft</code> (created, not sent)</li> <li><code>sent</code> (sent to client)</li> <li><code>paid</code> (marked paid)</li> <li><code>overdue</code> (past due date, automatically set when <code>due_date</code> is passed and <code>status</code> is still sent)</li> <li><code>cancelled</code> (cancelled)</li> </ul> <p>The API returns <code>409 Conflict</code> if you attempt an invalid state transition (for example, sending an invoice that is already <code>sent</code> or <code>cancelled</code>).</p>"},{"location":"guides/invoicing/#list-approved-expenses-to-invoice","title":"List approved expenses to invoice","text":"<p>Use <code>GET /expenses?status=approved</code> to find expenses ready to invoice. See Managing Expenses for filtering and pagination details.</p>"},{"location":"guides/invoicing/#create-an-invoice","title":"Create an invoice","text":"<p>Use <code>POST /invoices</code> to generate an invoice from approved expenses for a specific client.</p> <p>Note: An expense can only be included in one invoice. If you attempt to create an invoice with an expense that's already been invoiced, the API returns <code>422 Unprocessable Entity</code> with details indicating which expenses are unavailable.</p> <p>The error response in this case looks like this:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"One or more expenses have already been invoiced\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"expense_ids\",\n        \"issue\": \"expense exp_1a2b3c4d5e is already included in invoice inv_abc123\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"guides/invoicing/#request","title":"Request","text":"<p>Required fields:</p> <ul> <li><code>client_id</code></li> <li><code>expense_ids</code> (one or more expense IDs)</li> </ul> <p>Optional fields:</p> <ul> <li><code>due_date</code> (YYYY-MM-DD)</li> <li><code>notes</code></li> </ul> <pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/invoices\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{\n    \"client_id\": \"cli_12345\",\n    \"expense_ids\": [\"exp_1a2b3c4d5e\", \"exp_6f7g8h9i0j\"],\n    \"due_date\": \"2025-02-15\",\n    \"notes\": \"Consulting services - January\"\n  }'\n</code></pre>"},{"location":"guides/invoicing/#response","title":"Response","text":"<p>The API returns <code>201 Created</code> with an <code>Invoice</code> object.</p> <p>Key fields:</p> <ul> <li><code>id</code></li> <li><code>invoice_number</code></li> <li><code>total_amount</code> (string, up to 2 decimals)</li> <li><code>currency</code> (ISO 4217 code, for example NOK)</li> <li><code>status</code></li> <li><code>expense_ids</code></li> </ul> <p>The <code>total_amount</code> is calculated as the sum of all included expense amounts in the specified currency. All expenses must use the same currency.</p> <p>Example:</p> <p><pre><code>{\n  \"id\": \"inv_jkl012\",\n  \"invoice_number\": \"INV-2025-001\",\n  \"client_id\": \"cli_12345\",\n  \"total_amount\": \"1250.50\",\n  \"currency\": \"NOK\",\n  \"due_date\": \"2025-02-15\",\n  \"status\": \"draft\",\n  \"expense_ids\": [\"exp_1a2b3c4d5e\", \"exp_6f7g8h9i0j\"],\n  \"created_at\": \"2025-01-17T10:00:00Z\",\n  \"sent_at\": null,\n  \"paid_at\": null\n}\n</code></pre> If validation fails, the API returns <code>422 Unprocessable Entity</code>.</p>"},{"location":"guides/invoicing/#list-invoices","title":"List invoices","text":"<p>Use <code>GET /invoices</code> to retrieve invoices. You can filter by <code>client_id</code> and <code>status</code>.</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/invoices?status=draft&amp;limit=50&amp;offset=0\"\n</code></pre> <p>A successful response returns:</p> <ul> <li><code>data</code>: array of invoices</li> <li><code>pagination</code>: { limit, offset, total, has_more }</li> </ul>"},{"location":"guides/invoicing/#get-an-invoice","title":"Get an invoice","text":"<p>Use <code>GET /invoices/{invoice_id}</code> to retrieve details for a specific invoice.</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/invoices/inv_jkl012\"\n</code></pre> <p>If the invoice ID does not exist, the API returns <code>404 Not Found</code>.</p>"},{"location":"guides/invoicing/#send-an-invoice","title":"Send an invoice","text":"<p>Use <code>POST /invoices/{invoice_id}/send</code> to send an invoice to the client (for example, by email).</p> <pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/invoices/inv_jkl012/send\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\"\n</code></pre> <p>The API returns <code>200 OK</code> with the updated invoice. After sending, status is typically <code>sent</code> and <code>sent_at</code> is set.</p> <p>If the invoice cannot be sent due to its current state, the API returns <code>409 Conflict</code>.</p>"},{"location":"guides/invoicing/#error-handling","title":"Error handling","text":"<p>These endpoints commonly return:</p> <ul> <li><code>400 Bad Request</code> (invalid request format or parameters)</li> <li><code>401 Unauthorized</code> (missing/invalid API key)</li> <li><code>403 Forbidden</code> (insufficient permissions)</li> <li><code>404 Not Found</code> (unknown <code>invoice_id</code>)</li> <li><code>409 Conflict</code> (invalid state transition, for example sending an invoice twice)</li> <li><code>422 Unprocessable Entity</code> (validation error for request bodies)</li> <li><code>429 Too Many Requests</code> (rate limiting, if enabled)</li> <li><code>500 Internal Server Error</code></li> </ul> <p>Error responses use this shape:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Request validation failed.\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      { \"field\": \"due_date\", \"issue\": \"must be a valid date\" }\n    ]\n  }\n}\n</code></pre>"},{"location":"guides/receipts/","title":"Working with receipts","text":"<p>Receipts provide proof of expenses and are required before submitting expenses for approval. This guide covers uploading receipts, attaching them to expenses, downloading receipt files, and managing receipt metadata.</p>"},{"location":"guides/receipts/#before-you-begin","title":"Before you begin","text":"<p>For authentication and environment details, see Authentication.</p>"},{"location":"guides/receipts/#supported-file-formats","title":"Supported file formats","text":"<p>The API accepts these receipt formats:</p> <ul> <li>Images: JPEG (<code>.jpg</code>, <code>.jpeg</code>), PNG (<code>.png</code>)</li> <li>Documents: PDF (<code>.pdf</code>)</li> </ul> <p>Maximum file size: 10MB</p>"},{"location":"guides/receipts/#upload-a-receipt","title":"Upload a receipt","text":"<p>Use <code>POST /receipts</code> to upload a receipt file. You can optionally attach it to an expense during upload.</p>"},{"location":"guides/receipts/#upload-without-attaching","title":"Upload without attaching","text":"<pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  -F \"file=@/path/to/receipt.pdf\"\n</code></pre>"},{"location":"guides/receipts/#upload-and-attach-to-expense","title":"Upload and attach to expense","text":"<pre><code>curl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  -F \"file=@/path/to/receipt.pdf\" \\\n  -F \"expense_id=exp_1a2b3c4d5e\"\n</code></pre> <p>When you include <code>expense_id</code>, the receipt is immediately associated with that expense.</p>"},{"location":"guides/receipts/#response","title":"Response","text":"<pre><code>{\n  \"id\": \"rec_xyz789\",\n  \"expense_id\": \"exp_1a2b3c4d5e\",\n  \"filename\": \"receipt_2025-01-10.pdf\",\n  \"content_type\": \"application/pdf\",\n  \"size\": 245678,\n  \"url\": \"https://api.fjordexpense.example.com/v1/receipts/rec_xyz789/download\",\n  \"uploaded_at\": \"2025-01-17T14:30:00Z\"\n}\n</code></pre> <p>Save the <code>id</code> - you'll need it to download or delete the receipt.</p>"},{"location":"guides/receipts/#get-receipt-metadata","title":"Get receipt metadata","text":"<p>Use <code>GET /receipts/{receipt_id}</code> to retrieve receipt details without downloading the file:</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -H \"Accept: application/json\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts/rec_xyz789\"\n</code></pre> <p>This returns the same metadata structure as the upload response, showing the filename, size, content type, and associated expense.</p>"},{"location":"guides/receipts/#download-a-receipt-file","title":"Download a receipt file","text":"<p>Use <code>GET /receipts/{receipt_id}/download</code> to download the original receipt file:</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts/rec_xyz789/download\" \\\n  --output receipt.pdf\n</code></pre> <p>The response is the binary file content with the appropriate <code>Content-Type</code> header (<code>image/jpeg</code>, <code>image/png</code>, or <code>application/pdf</code>).</p>"},{"location":"guides/receipts/#display-in-browser","title":"Display in browser","text":"<p>To display the receipt in a browser, use the download URL directly:</p> <pre><code>https://api.fjordexpense.example.com/v1/receipts/rec_xyz789/download\n</code></pre> <p>Include your API key in the request header when accessing this URL programmatically.</p>"},{"location":"guides/receipts/#multiple-receipts-per-expense","title":"Multiple receipts per expense","text":"<p>An expense can have multiple receipts attached. This is useful when:</p> <ul> <li>A single expense involves multiple transactions (for example, hotel and meals)</li> <li>The original receipt is unclear and a clearer copy is added</li> <li>Supporting documentation is needed (for example, approval emails)</li> </ul> <p>Upload each receipt separately with the same <code>expense_id</code>:</p> <pre><code># Upload first receipt\ncurl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -F \"file=@hotel_receipt.pdf\" \\\n  -F \"expense_id=exp_1a2b3c4d5e\"\n\n# Upload second receipt\ncurl -X POST \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\" \\\n  -F \"file=@meal_receipt.pdf\" \\\n  -F \"expense_id=exp_1a2b3c4d5e\"\n</code></pre> <p>Both receipts will appear in the expense's <code>receipt_ids</code> array.</p>"},{"location":"guides/receipts/#delete-a-receipt","title":"Delete a receipt","text":"<p>Use <code>DELETE /receipts/{receipt_id}</code> to remove a receipt:</p> <pre><code>curl -X DELETE \\\n  \"https://sandbox.fjordexpense.example.com/v1/receipts/rec_xyz789\" \\\n  -H \"X-API-Key: $FJORD_API_KEY\"\n</code></pre> <p>Returns <code>204 No Content</code> on success.</p> <p>Important: You cannot delete receipts attached to submitted, approved, or rejected expenses. The expense must be in <code>draft</code> status. Attempting to delete a receipt from a submitted expense returns <code>409 Conflict</code>.</p>"},{"location":"guides/receipts/#receipt-requirements-before-submission","title":"Receipt requirements before submission","text":"<p>Before submitting an expense for approval using <code>POST /expenses/{expense_id}/submit</code>, the expense must have at least one receipt attached.</p> <p>If you attempt to submit an expense without receipts, you'll receive this error:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"bad_request\",\n    \"message\": \"Expense must have at least one receipt before submission\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre>"},{"location":"guides/receipts/#file-size-and-format-validation","title":"File size and format validation","text":"<p>413 Payload Too Large - File exceeds 10MB:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"payload_too_large\",\n    \"message\": \"File size exceeds 10MB limit\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>422 Validation Error - Unsupported file format:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Invalid file format\",\n    \"request_id\": \"req_8f3c1a2b\",\n    \"details\": [\n      {\n        \"field\": \"file\",\n        \"issue\": \"must be JPEG, PNG, or PDF\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"guides/receipts/#working-with-receipt-metadata","title":"Working with receipt metadata","text":"<p>The expense object includes a <code>receipt_ids</code> array showing all attached receipts:</p> <pre><code>curl -H \"X-API-Key: $FJORD_API_KEY\" \\\n  \"https://sandbox.fjordexpense.example.com/v1/expenses/exp_1a2b3c4d5e\"\n</code></pre> <p>Response excerpt:</p> <pre><code>{\n  \"id\": \"exp_1a2b3c4d5e\",\n  \"amount\": \"450.00\",\n  \"currency\": \"NOK\",\n  \"receipt_ids\": [\"rec_xyz789\", \"rec_abc123\"],\n  ...\n}\n</code></pre> <p>To get details for each receipt, call <code>GET /receipts/{receipt_id}</code> for each ID, or download them directly using the download endpoint.</p>"},{"location":"guides/receipts/#error-handling","title":"Error handling","text":"<p>Common errors when working with receipts:</p> <p>400 Bad Request - Missing file in upload:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"bad_request\",\n    \"message\": \"No file provided\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>404 Not Found - Receipt ID does not exist:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"not_found\",\n    \"message\": \"Receipt not found\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre> <p>409 Conflict - Cannot delete receipt from submitted expense:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"conflict\",\n    \"message\": \"Cannot delete receipt from submitted expense\",\n    \"request_id\": \"req_8f3c1a2b\"\n  }\n}\n</code></pre>"},{"location":"guides/receipts/#best-practices","title":"Best practices","text":"<p>Upload immediately: Upload receipts as soon as expenses are created. Don't wait until submission time to avoid delays.</p> <p>Use descriptive filenames: Name files clearly (for example, <code>hotel_2025-01-10.pdf</code>) to make them easier to identify later.</p> <p>Verify uploads: After uploading, verify the receipt appears in the expense's <code>receipt_ids</code> array.</p> <p>Keep originals: The API stores receipts indefinitely, but keep original receipts according to your organization's retention policy.</p> <p>Check file size: If your images are too large, compress them before upload. Most phones capture high-resolution images that can be safely reduced to under 2MB without losing readability.</p> <p>Use PDF for documents: If you have multiple pages or want to preserve document formatting, upload as PDF rather than multiple images.</p>"}]}